<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
<title>Toplu Para Takip</title>
<style>
  :root {
    --bg-grad-top: #0f172a;
    --bg-grad-bottom: #1e293b;
    --card-bg: rgba(30,41,59,0.6);
    --card-border: rgba(148,163,184,0.2);
    --row-bg: rgba(15,23,42,0.4);
    --row-alt-bg: rgba(30,41,59,0.4);
    --accent: #38bdf8;
    --text-main: #f8fafc;
    --text-dim: #94a3b8;
    --radius-xl: 1rem;
  }

  * {
    box-sizing: border-box;
    -webkit-font-smoothing: antialiased;
  }

  html, body {
    margin: 0;
    padding: 0;
    background: radial-gradient(circle at 20% 20%, #1e293b 0%, #0f172a 60%);
    background-color: #0f172a;
    color: var(--text-main);
    font-family: system-ui, -apple-system, BlinkMacSystemFont, "Inter", Roboto, "Helvetica Neue", sans-serif;
    height: 100dvh;          /* daha doğru mobil yüksekliği */
    overflow: hidden;        /* genel scroll yok */
  }

  .app-shell {
    width: 100%;
    max-width: 480px;
    height: 100%;
    margin: 0 auto;
    padding: 8px 12px 12px;
    display: flex;
    flex-direction: column;
  }

  /* ÜST KISIM */
  header {
    flex-shrink: 0;
    text-align: center;
    padding-bottom: 4px;
  }

  header .title {
    font-size: 0.95rem;
    font-weight: 600;
    color: var(--text-main);
    letter-spacing: -0.03em;
    line-height: 1.2;
  }

  header .sub {
    font-size: 0.7rem;
    color: var(--text-dim);
    line-height: 1.2;
  }

  /* ORTA KART (TABLO + TOPLAM) */
  .table-card {
    flex: 1;
    min-height: 0; /* flex child scroll için şart */
    background: var(--card-bg);
    border: 1px solid var(--card-border);
    box-shadow:
      0 30px 120px rgba(0,0,0,0.8),
      0 4px 20px rgba(0,0,0,0.6),
      0 0 120px rgba(56,189,248,0.15) inset;
    border-radius: var(--radius-xl);
    padding: 8px;
    display: flex;
    flex-direction: column;
  }

  /* TABLO BAŞLIK SATIRI */
  .table-head {
    flex-shrink: 0;
    display: grid;
    grid-template-columns: 0.6fr 1fr 1fr 1fr;
    font-size: 0.6rem;
    font-weight: 500;
    color: var(--text-dim);
    padding: 4px 6px;
    border-radius: calc(var(--radius-xl) - 6px);
    background: rgba(15,23,42,0.6);
    border: 1px solid rgba(148,163,184,0.15);
    text-align: center;
    line-height: 1.2;
  }

  /* SATIRLAR ALANI */
  .rows-scroll-area {
    flex: 1;
    min-height: 0;
    margin-top: 6px;
    overflow-y: auto;  /* sadece orta bölüm gerektiğinde hafif kayabilir */
    scrollbar-width: none; /* Firefox */
  }
  .rows-scroll-area::-webkit-scrollbar{
    display:none; /* Mobilde çirkin scrollbar yok */
  }

  .row {
    display: grid;
    grid-template-columns: 0.6fr 1fr 1fr 1fr;
    align-items: center;
    padding: 4px 6px;
    font-size: 0.7rem;
    line-height: 1.2;
    border-radius: 10px;
  }

  .row:nth-child(odd){
    background: var(--row-bg);
  }
  .row:nth-child(even){
    background: var(--row-alt-bg);
  }

  .cell-label {
    font-weight: 500;
    text-align: center;
    color: var(--text-main);
  }

  .cell-input {
    display: flex;
    justify-content: center;
  }

  input.money {
    width: 90%;
    max-width: 90px;
    background: rgba(15,23,42,0.6);
    border: 1px solid rgba(148,163,184,0.4);
    border-radius: 6px;
    padding: 5px 6px;
    font-size: 0.7rem;
    text-align: center;
    color: var(--text-main);
    font-family: inherit;
    outline: none;
  }

  input.money:focus {
    border-color: var(--accent);
    box-shadow: 0 0 8px rgba(56,189,248,0.6);
  }

  .cell-out {
    text-align: center;
    font-variant-numeric: tabular-nums;
    min-width: 3ch;
    font-weight: 600;
    color: var(--accent);
  }

  /* TOPLAM BLOĞU (footer değil artık kartın içinde sabit alan) */
  .totals-bar {
    flex-shrink: 0;
    margin-top: 8px;
    background: rgba(15,23,42,0.7);
    border: 1px solid rgba(56,189,248,0.3);
    box-shadow: 0 0 20px rgba(56,189,248,0.4);
    border-radius: var(--radius-xl);
    padding: 8px;
    font-size: 0.7rem;
    line-height: 1.3;
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    row-gap: 4px;
    column-gap: 6px;
    text-align: center;
  }

  .total-label {
    color: var(--text-dim);
    font-weight: 500;
    font-size: 0.6rem;
    line-height: 1.2;
  }
  .total-value {
    font-weight: 600;
    color: var(--text-main);
    font-variant-numeric: tabular-nums;
  }
</style>
</head>
<body>
<div class="app-shell">

  <header>
    <div class="title">Toplu Para Takip</div>
    <div class="sub">Canlı hesaplama • Anlık toplam</div>
  </header>

  <section class="table-card">
    <!-- kolon başlıkları -->
    <div class="table-head">
      <div>Kişi</div>
      <div>Verilen<br>Para</div>
      <div>İşlem<br>Ücreti</div>
      <div>Elde<br>Kalan</div>
    </div>

    <!-- kaydırılabilir satırlar -->
    <div class="rows-scroll-area" id="rowsWrapper">
      <!-- JS dolduracak -->
    </div>

    <!-- toplam blok -->
    <div class="totals-bar">
      <div>
        <div class="total-label">Toplam Verilen</div>
        <div class="total-value" id="sumVerilen">0.00</div>
      </div>
      <div>
        <div class="total-label">Toplam Ücret</div>
        <div class="total-value" id="sumUcret">0.00</div>
      </div>
      <div>
        <div class="total-label">Toplam Elde Kalan</div>
        <div class="total-value" id="sumKalan">0.00</div>
      </div>
    </div>
  </section>

</div>

<script>
(function(){
  const ROW_COUNT = 10;

  const rowsWrapper   = document.getElementById('rowsWrapper');
  const sumVerilenEl  = document.getElementById('sumVerilen');
  const sumUcretEl    = document.getElementById('sumUcret');
  const sumKalanEl    = document.getElementById('sumKalan');

  // string -> number (virgül veya nokta destekli)
  function toNum(v){
    const n = parseFloat((v || "").toString().replace(",", "."));
    return isNaN(n) ? 0 : n;
  }

  // Toplamları yeniden hesapla
  function recalcTotals(){
    let totalVerilen = 0;
    let totalUcret   = 0;
    let totalKalan   = 0;

    const allRows = rowsWrapper.querySelectorAll('.row');
    allRows.forEach(r => {
      const verilen = toNum(r.querySelector('input.verilen').value);
      const ucret   = toNum(r.querySelector('input.ucret').value);
      const kalan   = verilen - ucret;

      totalVerilen += verilen;
      totalUcret   += ucret;
      totalKalan   += kalan;
    });

    sumVerilenEl.textContent = totalVerilen.toFixed(2);
    sumUcretEl.textContent   = totalUcret.toFixed(2);
    sumKalanEl.textContent   = totalKalan.toFixed(2);
  }

  // Tek tek satır oluştur
  function createRow(i){
    const row = document.createElement('div');
    row.className = 'row';

    // kişi hücresi
    const cLabel = document.createElement('div');
    cLabel.className = 'cell-label';
    cLabel.textContent = (i+1) + ". kişi";

    // verilen para input
    const cVerilen = document.createElement('div');
    cVerilen.className = 'cell-input';
    const inpVerilen = document.createElement('input');
    inpVerilen.type = 'number';
    inpVerilen.step = '0.01';
    inpVerilen.inputMode = 'decimal';
    inpVerilen.className = 'money verilen';
    inpVerilen.placeholder = "0.00";

    // işlem ücreti input
    const cUcret = document.createElement('div');
    cUcret.className = 'cell-input';
    const inpUcret = document.createElement('input');
    inpUcret.type = 'number';
    inpUcret.step = '0.01';
    inpUcret.inputMode = 'decimal';
    inpUcret.className = 'money ucret';
    inpUcret.placeholder = "0.00";

    // elde kalan output
    const cKalan = document.createElement('div');
    cKalan.className = 'cell-out kalan';
    cKalan.textContent = "0.00";

    cVerilen.appendChild(inpVerilen);
    cUcret.appendChild(inpUcret);

    row.appendChild(cLabel);
    row.appendChild(cVerilen);
    row.appendChild(cUcret);
    row.appendChild(cKalan);

    // satır içi hesaplama
    function recalcRowAndTotals(){
      const verilen = toNum(inpVerilen.value);
      const ucret   = toNum(inpUcret.value);
      const kalan   = verilen - ucret;
      cKalan.textContent = kalan.toFixed(2);

      recalcTotals();
    }

    inpVerilen.addEventListener('input', recalcRowAndTotals);
    inpUcret.addEventListener('input', recalcRowAndTotals);

    return row;
  }

  // 10 satırı ekle
  for(let i=0;i<ROW_COUNT;i++){
    rowsWrapper.appendChild(createRow(i));
  }

  // ilk toplamları hesapla (0.00 vs)
  recalcTotals();

})();
</script>
</body>
</html>
